# 미비 기능 및 문서-코드 불일치 조사 보고서 (TODO-01)

## 0. 문서 정보
- **작성일:** 2025-12-18
- **유형:** Gap Analysis (명세 vs 구현)
- **대상:** `docs/02_specs` vs `backend/modules`

---

## 1. 개요
프로젝트의 요구사항 명세서(`SPEC`)와 실제 백엔드 코드(`Java`)를 대조 분석한 결과, 구현이 누락되었거나 명세와 다르게 간소화(MVP)된 항목들을 정리합니다. 본 문서는 향후 개발 우선순위 산정의 기초 자료로 활용됩니다.

---

## 2. 주요 미비 사항 리스트

### 🟥 2.1 도메인 모듈 누락 (Missing)
| 항목 | 관련 문서 | 내용 |
| :--- | :--- | :--- |
| **대시보드 및 리포팅** | `SPEC_11` | `backend/modules/dashboard` 패키지가 존재하지 않음. 부서별/전사 통계 집계 및 위젯 권한 제어 로직 미구현. |

### 🟨 2.2 기능적 불충분 (Incomplete / MVP Only)
| 모듈 | 기능 | 명세(Docs) 대비 부족한 점 |
| :--- | :--- | :--- |
| **Approval** | **다단계 결재** | 문서(`SPEC_01`)에는 순차적 워크플로우를 정의했으나, 코드는 첫 번째 단계 승인 시 즉시 최종 승인 처리되는 MVP 상태임. |
| **Tenant** | **테넌트 스위칭** | 슈퍼 어드민의 타 테넌트 접속 관리(Impersonation) 및 토큰 재발급 로직이 `TenantService`에 누락됨. |
| **Common/DB** | **테넌트 격리** | `Technical Specification`의 핵심인 `company_id` 기반 데이터 격리가 엔티티에는 있으나, 쿼리 레벨에서의 자동 필터링 적용 여부 확인 필요. |
| **Event** | **이벤트 기반 연동** | 테넌트 생성 등 주요 도메인 행위에 대해 `// TODO` 주석 처리된 채 이벤트 발행 로직이 누락됨. |

### 🟦 2.3 기술적 정책 미준수
| 구분 | 내용 | 비고 |
| :--- | :--- | :--- |
| **동시성 제어** | `SPEC_01`에 명시된 `@Version` 기반 낙관적 락(Optimistic Lock) 적용 및 예외 처리 로직 불분명. | 안정성 위협 요소 |
| **초기화 로직** | 테넌트 생성 시 관리자(Tenant Admin) 계정을 자동으로 생성하고 시드 데이터를 삽입하는 `Provisioning` 로직 미흡. | 운영 편의성 저하 |

---

## 3. 향후 조치 계획
1. **[Priority 1]** Approval 모듈의 다단계 결재 로직 정식 구현.
2. **[Priority 1]** 테넌트 관리 기능 고도화 (스위칭 및 초기 관리자 생성).
3. **[Priority 2]** Dashboard 모듈 신설 및 통계 API 구현.
4. **[Priority 3]** 통합 아키텍처 테스트(`ArchUnit`)를 통한 전반적인 격리 정책 검증.

---
*본 문서는 차기 개발 사이클의 기준점으로 활용됩니다.*
